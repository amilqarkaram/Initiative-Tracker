(this["webpackJsonpinitiative-tracker-production"]=this["webpackJsonpinitiative-tracker-production"]||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(15),s=n.n(a),i=(n(57),n(58),n(13)),o=n.n(i),d=n(22),l=n(20),j=n(3),u=n(18),b=(n(60),n(12)),h=n.n(b),m=n(38),O=n.n(m),x=n(105),f=n(0);var p=function(e){function t(t){e.handleDropdownClick(t.target.innerText)}return Object(f.jsxs)("div",{children:[console.log("lenght"+e.searchItems.length),e.searchItems.map((function(e){return Object(f.jsx)("button",{onClick:t,className:"areaOptions",children:Object(f.jsx)("p",{style:{zIndex:"1"},href:"#/action-1",children:e})})}))]})};var v=function(e){var t=r.a.useState({textInput:"",allMonsters:{},dropdownMonsters:[],readOnly:!0}),n=Object(u.a)(t,2),c=n[0],a=n[1];return r.a.useEffect((function(){function e(){return(e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,a((function(e){return Object(j.a)(Object(j.a)({},e),{},{readOnly:!1})}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h.a.get("/api/").then((function(t){(function(t){return e.apply(this,arguments)})(t).then((function(){console.log(t.data),a((function(e){return Object(j.a)(Object(j.a)({},e),{},{allMonsters:t.data})}))}))}))}),[]),r.a.useEffect((function(){var e=document.querySelector("textarea");function t(e){13===e.keyCode&&(e.preventDefault(),document.querySelector(".addButton").click())}return e.addEventListener("keyup",t),function(n){e.removeEventListener("keyup",t)}})),Object(f.jsxs)("div",{className:"divArea",children:[Object(f.jsx)("textarea",{placeholder:"Name + Initiative",rows:"1",className:"inputArea",value:c.textInput,onChange:function(t){""===t.target.value?a((function(e){return Object(j.a)(Object(j.a)({},e),{},{textInput:t.target.value,dropdownMonsters:[]})})):function(){var n=[],r=[],s=4;e.windowWidth>641&&e.windowWidth<1007&&(s=2);for(var i=[],o=0;o<c.allMonsters.length;++o)i.push(c.allMonsters[o].toLowerCase());for(var d=0;d<s;++d){var l=i.find((function(e,n){return e.includes(t.target.value.toLowerCase())&&!r.includes(e)}));r.push(l),n.push(c.allMonsters[i.indexOf(l)])}var u=n.filter((function(e){return void 0!==e}));a((function(e){return Object(j.a)(Object(j.a)({},e),{},{textInput:t.target.value,dropdownMonsters:u})}))}()},readOnly:c.readOnly}),Object(f.jsx)(x.a,{onClick:function(t){var n="",r="",s=c.textInput,i=!0;"will"===s.substring(0,4).toLowerCase()&&(n=s,i=!1);for(var o=0;o<s.length;++o)i&&(s.charCodeAt(o)>=65&&s.charCodeAt(o)<=122||32===s.charCodeAt(o)||44===s.charCodeAt(o))?n+=s.charAt(o):s.charCodeAt(o)>=48&&s.charCodeAt(o)<=57&&(r+=s.charAt(o));e.saveInfo(n,r),a((function(e){return Object(j.a)(Object(j.a)({},e),{},{textInput:""})}))},className:"addButton",children:Object(f.jsx)(O.a,{})}),Object(f.jsx)(p,{handleDropdownClick:function(t){function n(){return(n=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a((function(e){return Object(j.a)(Object(j.a)({},e),{},{textInput:t})})),h.a.get("/api/"+t).then((function(t){(function(e){return n.apply(this,arguments)})(t.data).then((function(){e.saveMonsterInfo(t.data)}))})),document.querySelector("textarea").focus()},searchItems:c.dropdownMonsters})]})};var g=n(51),N=n.n(g),y=n(50),w=n.n(y);var k=function(e){var t=r.a.useState({index:e.index,count:e.count}),n=Object(u.a)(t,2),c=n[0],a=n[1];return r.a.useEffect((function(){a({index:e.index,count:e.count}),console.log("character card rendered")}),[e.index,e.count]),Object(f.jsxs)("div",{className:"areaCard","data-id":e.card.charName,id:e.index,children:[Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:"profile-pic",onClick:e.handleClick,src:"images/man-profile-cartoon_18591-58482.jpg",alt:"Profile Pic","data-id":e.card.charName,"data-initiative":e.card.charInitiative})}),Object(f.jsx)("div",{onClick:e.handleClick,className:"areaText",children:Object(f.jsxs)("p",{onClick:e.handleClick,"data-id":e.card.charName,children:["Name: ",e.card.charName," ",Object(f.jsx)("br",{}),"Initiative: ",e.card.charInitiative]})}),c.index===e.count-1?Object(f.jsx)(w.a,{style:{position:"absolute",right:"0",margin:"auto",top:"0",bottom:"30"},color:"black",fontSize:"large"}):"",Object(f.jsx)(x.a,{style:{position:"absolute",right:"0",margin:"auto",top:"20",bottom:"0"},onClick:function(){e.DeleteInfo(e.card.charName,e.card.charInitiative)},className:"addButton",children:Object(f.jsx)(N.a,{})})]})};var I=function(e){function t(t){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{count:0})})),e.DisplayInfoCard(t.target.getAttribute("data-id"),t.target.getAttribute("data-initiative"))}function n(t,n){e.setState((function(e){var c=[];return void 0!==e.cards&&(c=e.cards.filter((function(e){return e.charName!==t||e.charInitiative!==n})),console.log(e.cards),e.cards.sort((function(e,t){return t.charInitiative-e.charInitiative}))),Object(j.a)(Object(j.a)({},e),{},{cards:c,count:0})})),e.RemoveInfoCard(t)}return r.a.useEffect((function(){console.log("array has changed")}),e.state.cards.length),Object(f.jsxs)("div",{id:"engineContainer",children:[Object(f.jsx)("div",{className:"createCharacterSpacing",children:Object(f.jsx)(v,{windowWidth:e.windowWidth,saveMonsterInfo:e.saveMonsterInfo,saveInfo:e.saveInfo})}),Object(f.jsxs)("div",{className:"spacing",children:[void 0!==e.state.cards?e.state.cards.map((function(c,r){return Object(f.jsx)("div",{className:"characterCardSpacing","data-remove":"hello",children:Object(f.jsx)(k,{count:e.state.count,index:r,card:c,DeleteInfo:n,handleClick:t},r)})})):"",0!==e.state.cards.length?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{id:"run",onClick:function(t){e.setState((function(t){var n=t.count;return++n>e.state.cards.length&&(n=e.state.cards.length),console.log("new count: "+n),Object(j.a)(Object(j.a)({},t),{},{count:n})}))},className:"runButton btn btn-dark",children:"Next"}),Object(f.jsx)("button",{id:"back",onClick:function(t){e.setState((function(e){var t=e.count;return--t<1&&(t=1),console.log("new Count :"+t),Object(j.a)(Object(j.a)({},e),{},{count:t})}))},className:"backButton btn btn-dark",children:"Back"})]}):""]})]})},C=n(30),S=n(10),M=n(31);S.b.add(M.a);var T=function(e){return Object(f.jsx)("div",{className:"header",children:Object(f.jsxs)("div",{className:"innerHeader",children:[Object(f.jsx)(C.a,{icon:["fas","dice-d20"],className:"headerIcon"}),Object(f.jsxs)("h1",{className:"headerTextStyle",children:["Initiative Tracker ",Object(f.jsx)("p",{className:"devStage",children:"Alpha"})," "]})]})})};S.b.add(M.a);var A=function(e){return Object(f.jsx)("div",{className:"die",children:Object(f.jsxs)("button",{onMouseOver:function(e){document.getElementById("result").style.color="black"},onMouseOut:function(e){document.getElementById("result").style.color="#F5E5C9"},type:"button",id:"roll",onClick:function(e){var t=document.getElementById("roll");t.classList.add("clicked"),setTimeout((function(){var e=document.getElementById("result");e.textContent="",e.removeAttribute("class");var n=Math.floor(20*Math.random())+1;n%10===n?(e.classList.add("oneDigit"),console.log("classList: "+e.classList)):(e.classList.add("twoDigit"),console.log("classList: "+e.classList));var c=n.toString(),r=document.createTextNode(c);e.appendChild(r),t.classList.remove("clicked")}),1e3)},children:[Object(f.jsx)(C.a,{icon:["fas","dice-d20"],className:"center dieIcon"}),Object(f.jsx)("h1",{id:"result",className:"twoDigit"})]})})};var E=function(e){var t=e.info;return console.log(t),Object(f.jsx)("div",{className:"monster",children:Object(f.jsxs)("div",{style:{overflowY:"scroll",overflowX:"hidden",border:"1px solid black",borderRadius:"30px",width:"300px",float:"left",height:"75vh",position:"relative",background:"#F5E5C9",boxShadow:"1px 1px 3px black",marginTop:"30px"},children:[Object(f.jsxs)("div",{className:"monsterHeader",children:[Object(f.jsx)("h1",{children:t.name}),Object(f.jsxs)("i",{children:[t.size," ",t.type,", ",t.alignment]})]}),Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsxs)("table",{className:"monsterTable",children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Armor Class"})," ",t.armor_class]})})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Hit Points"})," ",t.hit_points]})})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Speed"})," ",t.speed.walk,",",void 0!==t.speed.swim?" swim "+t.speed.swim+",":"",void 0!==t.speed.climb?" climb "+t.speed.climb+",":""]})})})]}),Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsxs)("table",{className:"abilityScores",children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"STR"})}),Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"DEX"})}),Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"CONT"})}),Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"INT"})}),Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"WIS"})}),Object(f.jsx)("td",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"CHA"})})]}),Object(f.jsxs)("tr",{className:"stats",children:[Object(f.jsxs)("td",{children:[t.strength," (",t.strength<10?"-":"+",Math.floor((parseInt(t.strength)-10)/2),")"]}),Object(f.jsxs)("td",{children:[t.dexterity,"(",t.dexterity<10?"":"+",Math.floor((parseInt(t.dexterity)-10)/2),")"]}),Object(f.jsxs)("td",{children:[t.constitution,"(",t.constitution<10?"-":"+",Math.floor((parseInt(t.constitution)-10)/2),")"]}),Object(f.jsxs)("td",{children:[t.intelligence,"(",t.intelligence<10?"-":"+",Math.floor((parseInt(t.intelligence)-10)/2),")"]}),Object(f.jsxs)("td",{children:[t.wisdom,"(",t.wisdom<10?"-":"+",Math.floor((parseInt(t.wisdom)-10)/2),")"]}),Object(f.jsxs)("td",{children:[t.charisma,"(",t.charisma<10?"-":"+",Math.floor((parseInt(t.charisma)-10)/2),")"]})]})]}),Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsxs)("table",{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Challenge"})," ",t.challenge_rating," (",t.xp," XP)"]})})}),Object(f.jsx)("tr",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Saving Throws"})," ",t.savingThrows.map((function(e){return e+", "}))]})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Skills"})," ",t.skills.map((function(e){return e+" "}))]})})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Senses"})," ",Object.keys(t.senses).map((function(e,n){var c=e;return e.includes("_")&&(c=e.replace("_"," ")),c+": "+t.senses[e]+", "}))]})})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Languages"})," ",t.languages]})})})]}),Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsxs)("table",{children:[Object(f.jsx)("th",{children:Object(f.jsx)("b",{children:void 0!==t.special_abilities?"Special Abilities":""})}),Object(f.jsx)("tr",{children:void 0!==t.special_abilities?t.special_abilities.map((function(e){return Object(f.jsxs)("p",{children:[Object(f.jsxs)("b",{children:[" ",e.name]})," ",e.desc,Object(f.jsx)("br",{})]})})):""})]}),Object(f.jsxs)("table",{children:[Object(f.jsxs)("th",{children:[Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsx)("b",{children:"Actions"})]}),Object(f.jsx)("tr",{children:t.actions.map((function(e){return Object(f.jsxs)("p",{children:[Object(f.jsxs)("b",{children:[" ",e.name]})," ",e.desc,Object(f.jsx)("br",{})]})}))})]}),Object(f.jsxs)("table",{children:[Object(f.jsxs)("th",{children:[Object(f.jsx)("img",{alt:"",src:"https://media-waterdeep.cursecdn.com/file-attachments/0/579/stat-block-header-bar.svg"}),Object(f.jsx)("b",{children:void 0!==t.legendary_actions?"Legendary Actions":""})]}),Object(f.jsx)("tr",{children:void 0!==t.legendary_actions?t.legendary_actions.map((function(e){return Object(f.jsxs)("p",{children:[Object(f.jsxs)("b",{children:[" ",e.name]})," ",e.desc,Object(f.jsx)("br",{})]})})):""})]})]})})};var L=function(e){return Object(f.jsx)("div",{children:"not a player"!==e.info?Object(f.jsxs)("div",{style:{overflowY:"scroll",overflowX:"hidden",border:"1px solid black",borderRadius:"30px",width:"300px",float:"left",height:"75vh",position:"relative",background:"#F5E5C9",boxShadow:"1px 1px 3px black",marginTop:"30px",textAlign:"center",fontFamily:"font-family: 'Langar', cursive;"},children:[Object(f.jsx)("h1",{children:"nobody"!==e.info?e.info:""}),Object(f.jsx)("img",{className:"playerImage",src:"images/man-profile-cartoon_18591-58482.jpg",alt:"Profile Pic"})]}):""})};var P=n(39),B=n.n(P);var W=function(){var e=r.a.useState({monsterInfo:{},monsterNames:[],currentMonsterName:"not a monster",currentPlayerName:"not a player",windowWidth:window.innerWidth,cards:[],count:0}),t=Object(u.a)(e,2),n=t[0],c=t[1];function a(e){console.log("character name: "+e),console.log("monsterNames: "+n.monsterNames),console.log(n),n.monsterNames.includes(e)?c((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPlayerName:"not a player",currentMonsterName:e})})):"Will"===e.substring(0,4)?c((function(e){return Object(j.a)(Object(j.a)({},e),{},{currentPlayerName:"not a player",currentMonsterName:"Will-o'-Wisp"})})):c((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPlayerName:e,currentMonsterName:"not a monster"})}))}function s(e){n.monsterNames.includes(e.name)?a(e.name):e.status.isAMonster?c((function(t){return t.monsterInfo[e.name]=e,Object(j.a)(Object(j.a)({},t),{},{monsterInfo:t.monsterInfo,monsterNames:[].concat(Object(l.a)(t.monsterNames),[e.name]),currentMonsterName:e.name,currentPlayerName:"not a player"})})):c((function(t){return Object(j.a)(Object(j.a)({},t),{},{monsterInfo:t.monsterInfo,monsterNames:t.monsterNames,currentMonsterName:"not a monster",currentPlayerName:e.status.characterName})}))}function i(e){console.log(e),h()({method:"post",url:"/api/save",data:JSON.stringify({token:e.tokenId,cards:n.cards}),headers:{"Content-Type":"application/json"}})}function b(e){h()({method:"post",url:"/api/retrieve",data:JSON.stringify({token:e.tokenId,cards:n.cards}),headers:{"Content-Type":"application/json"}}).then((function(e){c((function(e){var t=Object(l.a)(e.cards);return t.length=0,Object(j.a)(Object(j.a)({},e),{},{cards:Object(l.a)(t)})}));for(var t=0;t<e.data.length;++t)m(e.data[t].charName,e.data[t].charInitiative),console.log("wy");console.log("ajsdfiwejfsajioaj[jois[jjioj[j]]]"+e.data.length)}))}function m(e,t){function n(){return(n=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c((function(n){if(void 0!==n.cards){var c=Object(l.a)(n.cards);c.push({charName:e,charInitiative:t}),c.sort((function(e,t){return t.charInitiative-e.charInitiative}))}return Object(j.a)(Object(j.a)({},n),{},{cards:Object(l.a)(c),count:0})})),""===e&&(e="nobody"),h.a.get("/api/"+e).then((function(e){(function(e){return n.apply(this,arguments)})(e.data).then((function(){s(e.data)}))}))}return r.a.useEffect((function(){function e(e){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{windowWidth:window.innerWidth})}))}function t(e){39!==e.keyCode||/INPUT|TEXTAREA|SELECT|BUTTON/.test(e.target.nodeName)||(e.preventDefault(),document.querySelector(".runButton")&&document.querySelector(".runButton").click()),37!==e.keyCode||/INPUT|TEXTAREA|SELECT|BUTTON/.test(e.target.nodeName)||(e.preventDefault(),document.querySelector(".backButton")&&document.querySelector(".backButton").click()),82!==e.keyCode||/INPUT|TEXTAREA|SELECT|BUTTON/.test(e.target.nodeName)||(e.preventDefault(),document.querySelector("#roll").click())}return document.addEventListener("keyup",t),window.addEventListener("resize",e),function(n){document.removeEventListener("keyup",t),window.removeEventListener("resize",e)}})),Object(f.jsxs)("div",{className:" App",children:[Object(f.jsx)(T,{windowWidth:n.windowWidth}),Object(f.jsx)(B.a,{clientId:"669290193365-6a99rv1tr3a7cuqjjc940n1c0uru49o5.apps.googleusercontent.com",buttonText:"Save with Google",onSuccess:i,onFailure:i,cookiePolicy:"single_host_origin"}),Object(f.jsx)(B.a,{clientId:"669290193365-6a99rv1tr3a7cuqjjc940n1c0uru49o5.apps.googleusercontent.com",buttonText:"Retrieve with Google",onSuccess:b,onFailure:b,cookiePolicy:"single_host_origin"}),Object(f.jsx)("div",{className:"monsterCard",children:"not a monster"===n.currentMonsterName?Object(f.jsx)(L,{info:n.currentPlayerName}):Object(f.jsx)(E,{info:n.monsterInfo[n.currentMonsterName]})}),Object(f.jsx)(I,{savedMonsterNames:n.monsterNames,windowWidth:n.windowWidth,style:{position:"absolute",right:"0"},DisplayInfoCard:a,saveMonsterInfo:s,RemoveInfoCard:function(e){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{monsterInfo:e.monsterInfo,monsterNames:e.monsterNames,currentMonsterName:"not a monster",currentPlayerName:"not a player"})}))},setState:c,state:n,saveInfo:m}),Object(f.jsxs)("div",{className:"RightCol",children:[" ",Object(f.jsx)(A,{windowWidth:n.windowWidth})," "]})]})};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.c6aaec53.chunk.js.map